# üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥ reg.ru

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –°–±–æ—Ä–∫–∞ frontend –¥–ª—è production

```bash
cd frontend
npm run build
cd ..
```

–°–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –≤ `frontend/dist/`

---

## –í–∞—Ä–∏–∞–Ω—Ç 1: –î–µ–ø–ª–æ–π –Ω–∞ reg.ru (Node.js —Ö–æ—Å—Ç–∏–Ω–≥)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```
/
‚îú‚îÄ‚îÄ server/              # Backend —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îú‚îÄ‚îÄ frontend/dist/       # –°–æ–±—Ä–∞–Ω–Ω—ã–π frontend
‚îú‚îÄ‚îÄ uploads/            # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ .env                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ .htaccess           # (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```

### –®–∞–≥–∏ –¥–µ–ø–ª–æ—è:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH/FTP**

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞** (–∫—Ä–æ–º–µ node_modules)

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   npm install --production
   ```

4. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```env
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   DB_HOST=localhost
   DB_PORT=5432
   DB_NAME=cuba_clasificados
   DB_USER=–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
   PORT=3000
   NODE_ENV=production
   FRONTEND_URL=https://cuba-clasificados.online
   UPLOAD_DIR=./uploads
   WEB_APP_URL=https://cuba-clasificados.online
   ```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL** –Ω–∞ reg.ru

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   npm start
   ```
   
   –ò–ª–∏ —á–µ—Ä–µ–∑ PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   ```bash
   npm install -g pm2
   pm2 start server/index.js --name cuba-clasificados
   pm2 save
   pm2 startup
   ```

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: –î–µ–ø–ª–æ–π frontend –æ—Ç–¥–µ–ª—å–Ω–æ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è frontend:

1. **–°–æ–±–µ—Ä–∏—Ç–µ frontend:**
   ```bash
   cd frontend
   npm run build
   ```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `frontend/dist/`** –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥

3. **–û–±–Ω–æ–≤–∏—Ç–µ `VITE_API_URL`** –≤ `.env` frontend –∏–ª–∏ –≤ `vite.config.js`:
   ```js
   // vite.config.js
   define: {
     'import.meta.env.VITE_API_URL': JSON.stringify('https://cuba-clasificados.online/api')
   }
   ```

4. **Backend —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ** –Ω–∞ Node.js —Ö–æ—Å—Ç–∏–Ω–≥–µ

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ reg.ru

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL** —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å reg.ru
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ö–µ–º—É:**
   ```bash
   psql -U –≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -d cuba_clasificados -f server/database/schema.sql
   ```
3. **–ò–ª–∏ –±–∞–∑–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather)
2. `/myapps` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí Web App ‚Üí Edit
3. **Web App URL:** `https://cuba-clasificados.online`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **Backend:** `https://cuba-clasificados.online/api/health`
2. **Frontend:** `https://cuba-clasificados.online`
3. **–°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:** `https://cuba-clasificados.online/api/listings`

---

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Telegram Web App)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `uploads` —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ –∑–∞–ø–∏—Å—å
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2 –∏–ª–∏ systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

---

## –§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –∫—Ä–æ–º–µ:
- `node_modules/`
- `.git/`
- `.env` (—Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- `frontend/node_modules/`
- `frontend/dist/` (—Å–æ–±–µ—Ä–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π)

